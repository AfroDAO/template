(function(d,f,g,a){var b;function e(k){d(".ptb-promt-box .show-login").show();d(".ptb-promt-box .show-error").hide();if(k=="error"){if(d(".ptb-promt-box .prompt-error").length==0){d(".ptb-promt-box .prompt-msg").after('<p class="prompt-error">'+ptb_upgrader.invalid_login+"</p>")}}else{d(".ptb-promt-box .prompt-error").remove()}d(".ptb-promt-box").addClass("update-plugin");d(".ptb_promt_overlay,.ptb-promt-box").fadeIn(500)}function j(){d(".ptb_promt_overlay,.ptb-promt-box").fadeOut(500,function(){var k=d(".ptb-promt-box"),l=k.find("iframe");if(l.length>0){l.remove()}k.removeClass("show-changelog")})}function c(){d(".ptb_alert").addClass("busy").fadeIn(800)}function h(k){if(k=="error"){k="error";i()}else{k="done"}d(".ptb_alert").removeClass("busy").addClass(k).delay(800).fadeOut(800,function(){d(this).removeClass(k)})}function i(k){d(".ptb_promt_overlay, .ptb-promt-box").delay(900).fadeIn(500);d(".ptb-promt-box .show-error").show();d(".ptb-promt-box .show-error p").remove();d(".ptb-promt-box .error-msg").after('<p class="prompt-error">'+k+"</p>");d(".ptb-promt-box .show-login").hide()}d(function(){d(".themify-ptb-upgrade-plugin").on("click",function(k){k.preventDefault();b=d(this);e()});d(".themify-ptb-upgrade-login").on("click",function(n){n.preventDefault();if(d(".ptb-promt-box").hasClass("update-plugin")){var m=d(this),o=m.parent().parent().find(".username").val(),l=m.parent().parent().find(".password").val(),k=m.closest(".notifications").find(".update").hasClass("login");if(o!=""&&l!=""){j();c();d.post(ajaxurl,{action:"themify_ptb_validate_login",type:"plugin",login:k,username:o,password:l,nicename_short:b.data("nicename_short"),update_type:b.data("update_type")},function(p){p=d.trim(p);if(p=="true"){h();d("#ptb_update_form").append('<input type="hidden" name="plugin" value="'+b.data("plugin")+'" /><input type="hidden" name="package_url" value="'+b.data("package_url")+'" /><input type="hidden" name="nicename_short" value="'+b.data("nicename_short")+'" />').submit()}else{h("error");e("error")}})}else{h("error");e("error")}}});d(".ptb_promt_overlay").on("click",function(){j()});d(".ptb_changelogs").on("click",function(m){m.preventDefault();var n=d(this),k=n.data("changelog");d(".ptb-promt-box .show-login,.ptb-promt-box .show-error").hide();d(".ptb_alert").addClass("busy").fadeIn(300);d(".ptb_promt_overlay,.ptb-promt-box").fadeIn(300);var l=d('<iframe src="'+k+'" />');l.on("load",function(){d(".ptb_alert").removeClass("busy").fadeOut(300)}).prependTo(".ptb-promt-box");d(".ptb-promt-box").addClass("show-changelog")})})}(jQuery,window,document));