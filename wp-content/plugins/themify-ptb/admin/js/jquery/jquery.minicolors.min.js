!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(F){function w(a,c){var d=F('<div class="minicolors" />'),b=F.minicolors.defaults;a.data("minicolors-initialized")||(c=F.extend(!0,{},b,c),d.addClass("minicolors-theme-"+c.theme).toggleClass("minicolors-with-opacity",c.opacity).toggleClass("minicolors-no-data-uris",c.dataUris!==!0),void 0!==c.position&&F.each(c.position.split(" "),function(){d.addClass("minicolors-position-"+this)}),a.addClass("minicolors-input").data("minicolors-initialized",!1).data("minicolors-settings",c).prop("size",7).wrap(d).after('<div class="minicolors-panel minicolors-slider-'+c.control+'"><div class="minicolors-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-opacity-slider minicolors-sprite"><div class="minicolors-picker"></div></div><div class="minicolors-grid minicolors-sprite"><div class="minicolors-grid-inner"></div><div class="minicolors-picker"><div></div></div></div></div>'),c.inline||(a.after('<span class="minicolors-swatch minicolors-sprite"><span class="minicolors-swatch-color"></span></span>'),a.next(".minicolors-swatch").on("click",function(e){e.preventDefault(),a.focus()})),a.parent().find(".minicolors-panel").on("selectstart",function(){return !1}).end(),c.inline&&a.parent().addClass("minicolors-inline"),z(a,!1),a.data("minicolors-initialized",!0))}function B(b){var a=b.parent();b.removeData("minicolors-initialized").removeData("minicolors-settings").removeProp("size").removeClass("minicolors-input"),a.before(b).remove()}function C(b){var a=b.parent(),c=a.find(".minicolors-panel"),d=b.data("minicolors-settings");!b.data("minicolors-initialized")||b.prop("disabled")||a.hasClass("minicolors-inline")||a.hasClass("minicolors-focus")||(x(),a.addClass("minicolors-focus"),c.stop(!0,!0).fadeIn(d.showSpeed,function(){d.show&&d.show.call(b.get(0))}))}function x(){F(".minicolors-focus").each(function(){var a=F(this),c=a.find(".minicolors-input"),d=a.find(".minicolors-panel"),b=c.data("minicolors-settings");d.fadeOut(b.hideSpeed,function(){b.hide&&b.hide.call(c.get(0)),a.removeClass("minicolors-focus")})})}function N(P,W,f){var v,X,U,b,T=P.parents(".minicolors").find(".minicolors-input"),O=T.data("minicolors-settings"),Q=P.find("[class$=-picker]"),S=P.offset().left,V=P.offset().top,R=Math.round(W.pageX-S),e=Math.round(W.pageY-V),y=f?O.animationSpeed:0;W.originalEvent.changedTouches&&(R=W.originalEvent.changedTouches[0].pageX-S,e=W.originalEvent.changedTouches[0].pageY-V),0>R&&(R=0),0>e&&(e=0),R>P.width()&&(R=P.width()),e>P.height()&&(e=P.height()),P.parent().is(".minicolors-slider-wheel")&&Q.parent().is(".minicolors-grid")&&(v=75-R,X=75-e,U=Math.sqrt(v*v+X*X),b=Math.atan2(X,v),0>b&&(b+=2*Math.PI),U>75&&(U=75,R=75-75*Math.cos(b),e=75-75*Math.sin(b)),R=Math.round(R),e=Math.round(e)),P.is(".minicolors-grid")?Q.stop(!0).animate({top:e+"px",left:R+"px"},y,O.animationEasing,function(){J(T,P)}):Q.stop(!0).animate({top:e+"px"},y,O.animationEasing,function(){J(T,P)})}function J(ae,U){function Z(b,a){var e,h;return b.length&&a?(e=b.offset().left,h=b.offset().top,{x:e-a.offset().left+b.outerWidth()/2,y:h-a.offset().top+b.outerHeight()/2}):null}var aa,V,ai,ag,X,ac,af,T=ae.val(),Y=ae.attr("data-opacity"),ab=ae.parent(),R=ae.data("minicolors-settings"),ah=ab.find(".minicolors-swatch"),g=ab.find(".minicolors-grid"),d=ab.find(".minicolors-slider"),Q=ab.find(".minicolors-opacity-slider"),P=g.find("[class$=-picker]"),W=d.find("[class$=-picker]"),ad=Q.find("[class$=-picker]"),c=Z(P,g),f=Z(W,d),O=Z(ad,Q);if(U.is(".minicolors-grid, .minicolors-slider")){switch(R.control){case"wheel":ag=g.width()/2-c.x,X=g.height()/2-c.y,ac=Math.sqrt(ag*ag+X*X),af=Math.atan2(X,ag),0>af&&(af+=2*Math.PI),ac>75&&(ac=75,c.x=69-75*Math.cos(af),c.y=69-75*Math.sin(af)),V=H(ac/0.75,0,100),aa=H(180*af/Math.PI,0,360),ai=H(100-Math.floor(f.y*(100/d.height())),0,100),T=I({h:aa,s:V,b:ai}),d.css("backgroundColor",I({h:aa,s:V,b:100}));break;case"saturation":aa=H(parseInt(c.x*(360/g.width()),10),0,360),V=H(100-Math.floor(f.y*(100/d.height())),0,100),ai=H(100-Math.floor(c.y*(100/g.height())),0,100),T=I({h:aa,s:V,b:ai}),d.css("backgroundColor",I({h:aa,s:100,b:ai})),ab.find(".minicolors-grid-inner").css("opacity",V/100);break;case"brightness":aa=H(parseInt(c.x*(360/g.width()),10),0,360),V=H(100-Math.floor(c.y*(100/g.height())),0,100),ai=H(100-Math.floor(f.y*(100/d.height())),0,100),T=I({h:aa,s:V,b:ai}),d.css("backgroundColor",I({h:aa,s:V,b:100})),ab.find(".minicolors-grid-inner").css("opacity",1-ai/100);break;default:aa=H(360-parseInt(f.y*(360/d.height()),10),0,360),V=H(Math.floor(c.x*(100/g.width())),0,100),ai=H(100-Math.floor(c.y*(100/g.height())),0,100),T=I({h:aa,s:V,b:ai}),g.css("backgroundColor",I({h:aa,s:100,b:100}))}ae.val(K(T,R.letterCase))}U.is(".minicolors-opacity-slider")&&(Y=R.opacity?parseFloat(1-O.y/Q.height()).toFixed(2):1,R.opacity&&ae.attr("data-opacity",Y)),ah.find("SPAN").css({backgroundColor:T,opacity:Y}),L(ae,T,Y)}function z(V,u){var R,S,v,Z,X,P,U,W=V.parent(),Q=V.data("minicolors-settings"),T=W.find(".minicolors-swatch"),Y=W.find(".minicolors-grid"),d=W.find(".minicolors-slider"),c=W.find(".minicolors-opacity-slider"),g=Y.find("[class$=-picker]"),f=d.find("[class$=-picker]"),O=c.find("[class$=-picker]");switch(R=K(q(V.val(),!0),Q.letterCase),R||(R=K(q(Q.defaultValue,!0),Q.letterCase)),S=k(R),u||V.val(R),Q.opacity&&(v=""===V.attr("data-opacity")?1:H(parseFloat(V.attr("data-opacity")).toFixed(2),0,1),isNaN(v)&&(v=1),V.attr("data-opacity",v),T.find("SPAN").css("opacity",v),X=H(c.height()-c.height()*v,0,c.height()),O.css("top",X+"px")),T.find("SPAN").css("backgroundColor",R),Q.control){case"wheel":P=H(Math.ceil(0.75*S.s),0,Y.height()/2),U=S.h*Math.PI/180,Z=H(75-Math.cos(U)*P,0,Y.width()),X=H(75-Math.sin(U)*P,0,Y.height()),g.css({top:X+"px",left:Z+"px"}),X=150-S.b/(100/Y.height()),""===R&&(X=0),f.css("top",X+"px"),d.css("backgroundColor",I({h:S.h,s:S.s,b:100}));break;case"saturation":Z=H(5*S.h/12,0,150),X=H(Y.height()-Math.ceil(S.b/(100/Y.height())),0,Y.height()),g.css({top:X+"px",left:Z+"px"}),X=H(d.height()-S.s*(d.height()/100),0,d.height()),f.css("top",X+"px"),d.css("backgroundColor",I({h:S.h,s:100,b:S.b})),W.find(".minicolors-grid-inner").css("opacity",S.s/100);break;case"brightness":Z=H(5*S.h/12,0,150),X=H(Y.height()-Math.ceil(S.s/(100/Y.height())),0,Y.height()),g.css({top:X+"px",left:Z+"px"}),X=H(d.height()-S.b*(d.height()/100),0,d.height()),f.css("top",X+"px"),d.css("backgroundColor",I({h:S.h,s:S.s,b:100})),W.find(".minicolors-grid-inner").css("opacity",1-S.b/100);break;default:Z=H(Math.ceil(S.s/(100/Y.width())),0,Y.width()),X=H(Y.height()-Math.ceil(S.b/(100/Y.height())),0,Y.height()),g.css({top:X+"px",left:Z+"px"}),X=H(d.height()-S.h/(360/d.height()),0,d.height()),f.css("top",X+"px"),Y.css("backgroundColor",I({h:S.h,s:100,b:100}))}V.data("minicolors-initialized")&&L(V,R,v)}function L(b,a,d){var e=b.data("minicolors-settings"),c=b.data("minicolors-lastChange");c&&c.hex===a&&c.opacity===d||(b.data("minicolors-lastChange",{hex:a,opacity:d}),e.change&&(e.changeDelay?(clearTimeout(b.data("minicolors-changeTimeout")),b.data("minicolors-changeTimeout",setTimeout(function(){e.change.call(b.get(0),a,d)},e.changeDelay))):e.change.call(b.get(0),a,d)),b.trigger("change").trigger("input"))}function E(a){var c=q(F(a).val(),!0),d=j(c),b=F(a).attr("data-opacity");return d?(void 0!==b&&F.extend(d,{a:parseFloat(b)}),d):null}function G(c,e){var f=q(F(c).val(),!0),d=j(f),b=F(c).attr("data-opacity");return d?(void 0===b&&(b=1),e?"rgba("+d.r+", "+d.g+", "+d.b+", "+parseFloat(b)+")":"rgb("+d.r+", "+d.g+", "+d.b+")"):null}function K(b,a){return"uppercase"===a?b.toUpperCase():b.toLowerCase()}function q(b,a){return b=b.replace(/[^A-F0-9]/gi,""),3!==b.length&&6!==b.length?"":(3===b.length&&a&&(b=b[0]+b[0]+b[1]+b[1]+b[2]+b[2]),"#"+b)}function H(b,a,c){return a>b&&(b=a),b>c&&(b=c),b}function A(d){var c={},l=Math.round(d.h),m=Math.round(255*d.s/100),f=Math.round(255*d.b/100);if(0===m){c.r=c.g=c.b=f}else{var b=f,h=(255-m)*f/255,g=(b-h)*(l%60)/60;360===l&&(l=0),60>l?(c.r=b,c.b=h,c.g=h+g):120>l?(c.g=b,c.b=h,c.r=b-g):180>l?(c.g=b,c.r=h,c.b=h+g):240>l?(c.b=b,c.r=h,c.g=b-g):300>l?(c.b=b,c.g=h,c.r=h+g):360>l?(c.r=b,c.g=h,c.b=b-g):(c.r=0,c.g=0,c.b=0)}return{r:Math.round(c.r),g:Math.round(c.g),b:Math.round(c.b)}}function D(a){var b=[a.r.toString(16),a.g.toString(16),a.b.toString(16)];return F.each(b,function(d,c){1===c.length&&(b[d]="0"+c)}),"#"+b.join("")}function I(a){return D(A(a))}function k(b){var a=M(j(b));return 0===a.s&&(a.h=360),a}function M(b){var a={h:0,s:0,b:0},d=Math.min(b.r,b.g,b.b),e=Math.max(b.r,b.g,b.b),c=e-d;return a.b=e,a.s=0!==e?255*c/e:0,a.h=0!==a.s?b.r===e?(b.g-b.b)/c:b.g===e?2+(b.b-b.r)/c:4+(b.r-b.g)/c:-1,a.h*=60,a.h<0&&(a.h+=360),a.s*=100/255,a.b*=100/255,a}function j(a){return a=parseInt(a.indexOf("#")>-1?a.substring(1):a,16),{r:a>>16,g:(65280&a)>>8,b:255&a}}F.minicolors={defaults:{animationSpeed:50,animationEasing:"swing",change:null,changeDelay:0,control:"hue",dataUris:!0,defaultValue:"",hide:null,hideSpeed:100,inline:!1,letterCase:"lowercase",opacity:!1,position:"bottom left",show:null,showSpeed:100,theme:"default"}},F.extend(F.fn,{minicolors:function(b,c){switch(b){case"destroy":return F(this).each(function(){B(F(this))}),F(this);case"hide":return x(),F(this);case"opacity":return void 0===c?F(this).attr("data-opacity"):(F(this).each(function(){z(F(this).attr("data-opacity",c))}),F(this));case"rgbObject":return E(F(this),"rgbaObject"===b);case"rgbString":case"rgbaString":return G(F(this),"rgbaString"===b);case"settings":return void 0===c?F(this).data("minicolors-settings"):(F(this).each(function(){var a=F(this).data("minicolors-settings")||{};B(F(this)),F(this).minicolors(F.extend(!0,a,c))}),F(this));case"show":return C(F(this).eq(0)),F(this);case"value":return void 0===c?F(this).val():(F(this).each(function(){z(F(this).val(c))}),F(this));default:return"create"!==b&&(c=b),F(this).each(function(){w(F(this),c)}),F(this)}}}),F(document).on("mousedown.minicolors touchstart.minicolors",function(a){F(a.target).parents().add(a.target).hasClass("minicolors")||x()}).on("mousedown.minicolors touchstart.minicolors",".minicolors-grid, .minicolors-slider, .minicolors-opacity-slider",function(a){var b=F(this);a.preventDefault(),F(document).data("minicolors-target",b),N(b,a,!0)}).on("mousemove.minicolors touchmove.minicolors",function(a){var b=F(document).data("minicolors-target");b&&N(b,a)}).on("mouseup.minicolors touchend.minicolors",function(){F(this).removeData("minicolors-target")}).on("mousedown.minicolors touchstart.minicolors",".minicolors-swatch",function(a){var b=F(this).parent().find(".minicolors-input");C(b),a.preventDefault(),a.stopImmediatePropagation()}).on("focus.minicolors",".minicolors-input",function(){var a=F(this);a.data("minicolors-initialized")&&C(a)}).on("blur.minicolors",".minicolors-input",function(){var a=F(this),b=a.data("minicolors-settings");a.data("minicolors-initialized")&&(a.val(q(a.val(),!0)),""===a.val()&&a.val(q(b.defaultValue,!0)),a.val(K(a.val(),b.letterCase)))}).on("keydown.minicolors",".minicolors-input",function(a){var b=F(this);if(b.data("minicolors-initialized")){switch(a.keyCode){case 9:x();break;case 13:case 27:x(),b.blur()}}}).on("keyup.minicolors",".minicolors-input",function(){var a=F(this);a.data("minicolors-initialized")&&z(a,!0)}).on("paste.minicolors",".minicolors-input",function(){var a=F(this);a.data("minicolors-initialized")&&setTimeout(function(){z(a,!0)},1)})});