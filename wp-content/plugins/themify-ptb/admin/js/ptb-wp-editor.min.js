(function(b,a){b.fn.ptb_wp_editor=function(d){if(!b(this).is("textarea")){console.warn("Element must be a textarea")}if(typeof tinyMCEPreInit=="undefined"||typeof QTags=="undefined"||typeof ap_vars=="undefined"){console.warn("ptb_wp_editor( $settings ); must be loaded")}if(!b(this).is("textarea")||typeof tinyMCEPreInit=="undefined"||typeof QTags=="undefined"||typeof ap_vars=="undefined"){return this}var e={mode:"html",mceInit:{theme:"modern",skin:"lightgray",language:"en",formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},deep:false,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignleft"],deep:false,remove:"none"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},deep:false,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["aligncenter"],deep:false,remove:"none"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},deep:false,remove:"none"},{selector:"img,table,dl.wp-caption",classes:["alignright"],deep:false,remove:"none"}],strikethrough:{inline:"del",deep:true,split:true}},relative_urls:false,remove_script_host:false,convert_urls:false,browser_spellcheck:true,fix_list_elements:true,entities:"38,amp,60,lt,62,gt",entity_encoding:"raw",keep_styles:false,paste_webkit_styles:"font-weight font-style color",preview_styles:"font-family font-size font-weight font-style text-decoration text-transform",wpeditimage_disable_captions:false,wpeditimage_html5_captions:false,width:"100%",height:400,autoresize_min_height:400,autoresize_max_height:800,plugins:"wpautoresize,charmap,hr,media,paste,tabfocus,textcolor,fullscreen,wordpress,wpeditimage,wpgallery,wplink,wpdialogs,wpview,image",content_css:ap_vars.includes_url+"css/dashicons.css?ver=4.5.2,"+ap_vars.includes_url+"js/mediaelement/mediaelementplayer.min.css?ver=4.5.2,"+ap_vars.includes_url+"js/mediaelement/wp-mediaelement.css?ver=4.5.2,"+ap_vars.includes_url+"js/tinymce/skins/lightgray/wp-content.css?ver=4.5.2",selector:"#apid",resize:"vertical",menubar:false,wpautop:true,indent:false,toolbar1:"bold,italic,strikethrough,bullist,numlist,blockquote,hr,alignleft,aligncenter,alignright,link,unlink,wp_more,spellchecker,wp_adv",toolbar2:"formatselect,underline,alignjustify,forecolor,pastetext,removeformat,charmap,outdent,indent,undo,redo,wp_help",toolbar4:"",tabfocus_elements:":prev,:next",body_class:"ptb_editor"}},c=new RegExp("apid","g");if(tinyMCEPreInit.mceInit.apid){e.mceInit=tinyMCEPreInit.mceInit.apid}var d=b.extend(true,e,d);return this.each(function(){if(!b(this).is("textarea")){console.warn("Element must be a textarea")}else{var l=b(this).attr("id");b.each(d.mceInit,function(q,r){if(b.type(r)=="string"){d.mceInit[q]=r.replace(c,l)}});d.mode=d.mode=="tmce"?"tmce":"html";tinyMCEPreInit.mceInit[l]=d.mceInit;b(this).addClass("wp-editor-area").show();var p=this;if(b(this).closest(".wp-editor-wrap").length){var m=b(this).closest(".wp-editor-wrap").parent();b(this).closest(".wp-editor-wrap").before(b(this).clone());b(this).closest(".wp-editor-wrap").remove();p=m.find('textarea[id="'+l+'"]')}var h=b('<div id="wp-'+l+'-wrap" class="wp-core-ui wp-editor-wrap '+d.mode+'-active" />'),f=b('<div id="wp-'+l+'-editor-tools" class="wp-editor-tools hide-if-no-js" />'),o=b('<div class="wp-editor-tabs" />'),i=b('<a id="'+l+'-html" data-wp-editor-id="'+l+'" class="wp-switch-editor switch-html" onclick="switchto(this);">Text</a>'),j=b('<a id="'+l+'-tmce" data-wp-editor-id="'+l+'" class="wp-switch-editor switch-tmce" onclick="switchto(this);">Visual</a>'),g=b('<div id="wp-'+l+'-media-buttons" class="wp-media-buttons" />'),n=b('<a href="#" id="'+l+'-insert-media-button" class="button insert-media add_media" data-editor="'+l+'" title="Add Media"><span class="wp-media-buttons-icon"></span> Add Media</a>'),k=b('<div id="wp-'+l+'-editor-container" class="wp-editor-container" />');n.appendTo(g);g.appendTo(f);i.appendTo(o);j.appendTo(o);o.appendTo(f);f.appendTo(h);k.appendTo(h);k.append(b(p).clone().addClass("wp-editor-area"));b(p).before('<link rel="stylesheet" id="editor-buttons-css" href="'+ap_vars.includes_url+'css/editor.css" type="text/css" media="all">');b(p).before(h);b(p).remove();new QTags(l);QTags._buttonsInit();b(h).on("click",".insert-media",function(t){b(h).find(".switch-html").trigger("click");var s=b(t.currentTarget),r=s.data("editor"),q={frame:"post",state:"insert",title:wp.media.view.l10n.addMedia,multiple:true};t.preventDefault();if(s.hasClass("gallery")){q.state="gallery";q.title=wp.media.view.l10n.createGalleryTitle}b(h).find(".switch-tmce").trigger("click");s.blur();wp.media.editor.open(r,q)})}})}})(jQuery,window);var switchto=function switchto(d){if(typeof tinymce!=="undefined"){var f=jQuery(d).attr("id").split("-");f=f[0];var c=jQuery("#wp-"+f+"-wrap");c.removeClass("tmce-active html-active");var a=c.find(".mce-tinymce");var b=jQuery("#"+f);var e=tinyMCE.get(f);if(jQuery(d).hasClass("switch-tmce")){c.addClass("tmce-active");a.show();b.hide();if(e){e.setContent(b.val())}}else{c.addClass("html-active");a.hide();b.show();if(e){b.val(e.getContent())}}}return false};