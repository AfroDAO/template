var pagination,content=ajax_layered_nav.containers,orderby=ajax_layered_nav.orderby,triggers=ajax_layered_nav.triggers.join(","),selects=ajax_layered_nav.selects.join(","),elements_to_remove=new Array,DocReadyReload=!1,isWorking=!1;function checkPagination(){0<jQuery("nav.pagination").length&&(pagination="")}function pageLoaderInit(){jQuery(document).on("click",triggers,function(e){this.blur();this.title||this.name,this.rel;return 1==jQuery(this).data("count")&&1==ajax_layered_nav.search_page_redirect?window.location.href=jQuery(this).data("link"):loadPage(jQuery(this).data("link")),e.preventDefault(),!1}),jQuery(document).on("change",selects,function(e){this.blur();this.title||this.name,this.rel;1==jQuery(this).data("count")&&1==ajax_layered_nav.search_page_redirect?window.location.href=jQuery(this).data("link"):loadPage(jQuery("option:selected",this).data("filter"));return e.preventDefault(),!1})}function loadPage(e,t){if(!isWorking){if(nohttp=e.replace("http://","").replace("https://",""),firstsla=nohttp.indexOf("/"),pathpos=e.indexOf(nohttp),path=e.substring(pathpos+firstsla),1!=t){var a={foo:1e3+1001*Math.random()};navigator.userAgent.match(/msie/i)||history.pushState(a,"ajax page loaded...",path)}jQuery.each(content,function(e,t){if(t==ajax_layered_nav.product_container){var a;a=jQuery(ajax_layered_nav.product_container).outerHeight(),jQuery(t+"").fadeOut("fast",function(){jQuery(t).html('<center style="min-height:'+a+'px;"><p>'+ajax_layered_nav.loading_text+'...<br><img src="'+ajax_layered_nav.loading_img+'" alt="loading"></p></center>'),jQuery(t).css({height:a}).fadeIn("slow",function(){})})}}),isWorking=!0,jQuery.ajax(e,{success:function(e){showPage(e)},error:function(){jQuery("#products").prepend('<p class="woocommerce-error">'+ajax_layered_nav.i18n_error_message+"</p>")}})}return!1}function showPage(a){isWorking=!1,elements_to_remove=[],elements_to_remove=content.slice();var n=!1;return 1==ajax_layered_nav.scrolltop&&0<jQuery(ajax_layered_nav.product_container).length&&jQuery("html").animate({scrollTop:jQuery(ajax_layered_nav.product_container).offset().top-ajax_layered_nav.offset},"slow"),jQuery.each(content,function(e,t){t==ajax_layered_nav.no_products&&0<jQuery(t,a).length&&(n=jQuery(t,a).html()),jQuery(t).each(function(){if(""!=this.id){var e="#"+this.id;if(0<jQuery(e,a).length){jQuery(e).fadeOut("fast",function(){jQuery(e).html(jQuery(e,a).html()),jQuery(e).fadeIn(1),1==DocReadyReload&&$(document).trigger("ready")})}else jQuery.each(elements_to_remove,function(e,t){jQuery(t).empty()})}else if(0<jQuery(t,a).length){jQuery(t).fadeOut("fast",function(){jQuery(t).html(function(){if("undefined"!=typeof infinite_scroll&&!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)){var e=jQuery(ajax_layered_nav.contentSelector);e.infinitescroll("destroy"),e.infinitescroll("reset"),e.infinitescroll("binding","unbind"),e.data("infinitescroll",null),jQuery(window).unbind(".infscr"),init_infinite_scroll(e),e.infinitescroll("bind")}return jQuery(t,a).html()}),jQuery(t).fadeIn(1),1==DocReadyReload&&$(document).trigger("ready")})}else jQuery.each(elements_to_remove,function(e,t){jQuery(t).empty()})})}),n&&jQuery(ajax_layered_nav.product_container).append('<p class="'+ajax_layered_nav.no_products.replace(".","")+'">'+n+"</p>"),pageLoaderInit(),jQuery("body").trigger("aln_reloaded"),!1}function init_infinite_scroll(e){e.infinitescroll({loading:{msgText:"Loading the next set of products...",finishedMsg:"All products loaded.",img:ajax_layered_nav.superstore_img},contentSelector:ajax_layered_nav.contentSelector,itemSelector:ajax_layered_nav.itemSelector,navSelector:ajax_layered_nav.navSelector,nextSelector:ajax_layered_nav.nextSelector,debug:!1,state:{isDestroyed:!1,isDone:!1}})}jQuery(document).ready(function(){pageLoaderInit(),jQuery(document).on("change",orderby+" select",function(){return $form=jQuery(this).parent(),$form.submit(),!1})}),window.onpopstate=function(e){null!=e.state&&loadPage(document.location.toString(),1)},Array.prototype.removeByValue=function(e){for(var t=0;t<this.length;t++)if(this[t]==e){this.splice(t,1);break}},jQuery.event.trigger({type:"aln_reloaded",time:new Date});
